# План портирования KeyList.cs

Файл `KeyList.cs` - это статический класс, который служит хранилищем для большого, жестко закодированного списка пользователей.

## Функциональность в C#

*   **Назначение**: Хранить в памяти статическую, неизменяемую базу данных пользователей. Судя по всему, это может быть список лицензированных пользователей или какая-то другая форма контроля доступа или распределения функционала.
*   **Реализация**: 
    *   Используется `static readonly StringBuilder`.
    *   В статическом конструкторе в `StringBuilder` добавляются сотни строк с данными.
    *   Каждая строка имеет формат с разделителями `|`, включая даты, никнеймы и другие данные.
    *   Публичное свойство `Users` предоставляет доступ ко всему списку в виде одной большой строки.

## Проверка на существующую реализацию в Android

- **Результат:** Функциональность не реализована. В Android-проекте нет ни этого класса, ни самих данных.

## Решение для портирования на Android

Жестко кодировать такой большой объем данных прямо в Java-классе - плохая практика. Правильным подходом для Android будет вынести эти данные в текстовый файл в папку `assets` и читать его при необходимости.

## План реализации

- [ ] **Создать текстовый файл**:
    - [ ] Создать файл `assets/keys/keylist.txt`.
    - [ ] Скопировать все строки из `StringBuilder` в C# коде в этот файл, каждая на новой строке.

- [ ] **Создать класс `KeyList.java`**:
    - [ ] Создать синглтон или статический класс `KeyList.java` в пакете `ru.neverlands.abclient.utils`.
    - [ ] Создать статический метод `getUsers()`, который будет возвращать содержимое файла `keylist.txt`.

- [ ] **Реализация `getUsers()`**:
    - [ ] Метод должен будет кэшировать данные, чтобы не читать файл с диска при каждом вызове.
    ```java
    public class KeyList {
        private static String cachedUsers = null;

        public static synchronized String getUsers(Context context) {
            if (cachedUsers == null) {
                try (InputStream is = context.getAssets().open("keys/keylist.txt")) {
                    // Логика чтения потока в строку
                    cachedUsers = readStreamToString(is);
                } catch (IOException e) {
                    e.printStackTrace();
                    cachedUsers = ""; // или вернуть null
                }
            }
            return cachedUsers;
        }
    }
    ```

- [ ] **Обновить `todo_ABClient.md`**, отметив `KeyList.cs` как проанализированный.
