### 1. План портирования MapPath.cs

Файл `MapPath.cs` — это движок навигатора. Он содержит алгоритм поиска пути (pathfinding) для нахождения оптимального маршрута между двумя точками на игровой карте.

### 2. Функциональность в C#

- **Назначение:** Построить кратчайший/оптимальный маршрут от исходной клетки до одной из клеток назначения.
- **Алгоритм:** Реализует алгоритм поиска в ширину, похожий на **алгоритм Дейкстры**. 
    1.  Начинает с исходной клетки.
    2.  В цикле `do...while` итеративно исследует все доступные соседние клетки.
    3.  Для каждой клетки рассматриваются 8 стандартных направлений, а также особые переходы: городские ворота (например, из `8-259` в `8-294`) и телепорты.
    4.  Каждый возможный маршрут до клетки хранится как объект `MapPathNode` в словаре `_matrix`. `MapPathNode` содержит сам путь (массив `RegNum`), его общую стоимость, наличие телепорта и т.д.
    5.  При нахождении нового пути к уже исследованной клетке, он сравнивается со старым. Если новый путь лучше (меньше по стоимости или другим критериям), он заменяет старый.
    6.  Когда путь достигает одной из целевых клеток, он добавляется в список `_bestPathes`.
- **`CanUseExistingPath()`:** Важный метод, который проверяет, можно ли использовать уже рассчитанный путь для текущей навигации. Он определяет следующий шаг (`NextJump`), его тип (обычный, телепорт, городские ворота) и оставшееся количество шагов.

### 3. Решение для портирования на Android

Это класс с чистой логикой, который можно портировать в Java практически один в один. Главное изменение — замена обращений к статическому классу `Map` на обращения к `MapRepository`.

- **Архитектура:**
    - **`utils/MapPath.java`:** Java-версия класса.
    - **`utils/MapPathNode.java`:** Вспомогательный класс для узла пути.
    - **Зависимости:** Все вызовы `Map.Cells`, `Map.Teleports`, `Map.Location` будут заменены на вызовы методов `MapRepository` (например, `mapRepository.getCell()`, `mapRepository.isTeleport()`).

### 4. План реализации

1.  **[ЗАВИСИМОСТЬ] Портировать `Map.cs`:**
    - [ ] Как описано в `todo_Map.cs.md`, создать `MapRepository` и наполнить его данными.
2.  **Создать `MapPathNode.java`:**
    - [ ] Создать класс, содержащий поля `CellNumbers`, `Cost`, `HasTeleport` и т.д.
    - [ ] Реализовать метод `compareTo` для сравнения двух путей.
3.  **Реализовать `MapPath.java`:**
    - [ ] Перенести все поля и основной конструктор.
    - [ ] Перевести алгоритм поиска пути, заменяя обращения к `Map` на `MapRepository`.
    - [ ] Перенести метод `CanUseExistingPath`.

- [ ] Создать классы-заглушки для `MapPath` и `MapPathNode`.