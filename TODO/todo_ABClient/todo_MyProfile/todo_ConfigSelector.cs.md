### 1. План портирования ConfigSelector.cs

Файл `ConfigSelector.cs` — это статический класс, который управляет всем процессом выбора, создания и расшифровки профиля пользователя при запуске приложения.

### 2. Функциональность в C#

- **Назначение:** Быть точкой входа для получения готового к использованию объекта `UserConfig`.
- **Процесс (`Process()`):**
    1.  Сканирует папку на наличие файлов профилей (`*.xml`).
    2.  Если профилей нет, запускает создание нового (`FormProfile`).
    3.  Если есть, проверяет самый последний использованный профиль на предмет авто-входа (`FormAutoLogon`).
    4.  Если авто-вход не сработал, показывает пользователю список всех профилей для выбора (`FormProfiles`).
    5.  После выбора профиля, если пароль в нем зашифрован, запрашивает мастер-пароль у пользователя (`FormAskPassword`) для расшифровки.

### 3. Решение для портирования на Android

Парадигма выбора профиля из списка файлов нетипична для мобильных приложений. Вместо этого следует реализовать стандартный для Android процесс входа в систему, ориентированный на одного пользователя, с возможностью "Запомнить меня".

- **Архитектура:** Вместо сложной логики выбора файла, будет использоваться `LoginActivity` и единое хранилище настроек `SharedPreferences`.
- **Замена:**
    - `FormProfiles` (выбор профиля) -> не нужен. Пользователь просто вводит логин/пароль.
    - `FormAutoLogon` (авто-вход) -> заменяется галочкой "Запомнить меня" и автоматической попыткой входа при запуске.
    - `FormAskPassword` (запрос пароля) -> заменяется `EncryptedSharedPreferences`, которые используют для защиты ключ, хранящийся в Android Keystore. Доступ к ключу может быть защищен биометрией или паролем устройства.
    - `FormProfile` (редактор профиля) -> становится частью экрана настроек внутри уже залогиненного приложения.

### 4. План реализации

1.  **Создать `SettingsRepository.kt`:**
    - Как было описано в анализе `UserConfig.cs`, этот репозиторий будет управлять чтением и записью всех настроек в `SharedPreferences` и `EncryptedSharedPreferences`.
2.  **Создать `LoginActivity.kt`:**
    - Это будет стартовая Activity, если в `SettingsRepository` нет сохраненного пользователя.
    - Содержит поля для логина, пароля и `CheckBox` "Запомнить меня".
3.  **Создать `LoginViewModel.kt`:**
    - Будет обрабатывать логику входа.
    - При нажатии на кнопку "Войти":
        - Сохраняет учетные данные в `SettingsRepository` (пароль — в `EncryptedSharedPreferences`).
        - Выполняет сетевой запрос для аутентификации.
        - В случае успеха, перенаправляет на `MainActivity`.
4.  **Логика авто-входа в `SplashActivity` или `MainActivity`:**
    - При запуске приложение проверяет `SettingsRepository`.
    - Если есть сохраненные учетные данные и флаг авто-входа, приложение сразу пытается выполнить вход, показывая экран загрузки. Если успешно — открывает `MainActivity`, если нет — `LoginActivity`.

- [ ] Логика `ConfigSelector` не портируется напрямую.
- [ ] Реализовать стандартный экран входа `LoginActivity`.
- [ ] Использовать `SettingsRepository` на базе `SharedPreferences` для хранения данных одного пользователя.
- [ ] Функциональность `FormProfile` перенести в экран настроек внутри приложения.