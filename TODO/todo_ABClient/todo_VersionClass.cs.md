# План портирования VersionClass.cs

Файл `VersionClass.cs` - это класс для хранения, форматирования и сравнения версий приложения.

## Функциональность в C#

*   **Назначение**: Инкапсулировать логику работы с номером версии приложения.
*   **Ключевые методы**:
    *   Конструктор: Принимает имя продукта и полную версию, парсит ее для получения "короткой" версии (первые 3 компонента).
    *   `AddNick(string nick)`: Добавляет ник пользователя к строке версии.
    *   `IsCurrentVersionAllowed(string[] arrayVersions)`: Проверяет, присутствует ли короткая версия приложения в массиве разрешенных версий.
    *   `IsNewerVersionOnSite(string siteVersion)`: Сравнивает текущую короткую версию с версией, полученной с сайта, и определяет, является ли версия на сайте более новой.

## Проверка на существующую реализацию в Android

- **Результат:** Частично реализовано.
- **Объяснение**:
    1.  В проекте существует класс `app/src/main/java/ru/neverlands/abclient/utils/VersionClass.java`.
    2.  В нем реализованы конструктор и методы для форматирования строк.
    3.  **Отсутствует** ключевая логика: методы `isCurrentVersionAllowed` и `isNewerVersionOnSite` не портированы.
    4.  Логика `getShortVersion` в Java-версии отличается: она возвращает только 2 компонента версии (например, `1.99`) вместо трех ( `1.99.0`), как в C#.

## Решение для портирования на Android

Необходимо дополнить существующий класс `VersionClass.java`, добавив недостающие методы и исправив логику `getShortVersion`.

## План реализации

- [ ] **Открыть `VersionClass.java`**.

- [ ] **Исправить метод `getShortVersion()`**:
    - [ ] Изменить логику так, чтобы она возвращала 3 компонента версии, если они есть, а не 2.

- [ ] **Портировать метод `isCurrentVersionAllowed(String[] arrayVersions)`**:
    - [ ] Добавить новый метод, который будет проверять наличие `getShortVersion()` в переданном массиве.

- [ ] **Портировать метод `isNewerVersionOnSite(String siteVersion)`**:
    - [ ] Добавить новый метод.
    - [ ] Перенести логику парсинга и сравнения каждого из трех компонентов версии.

- [ ] **Обновить `todo_ABClient.md`**, отметив `VersionClass.cs` как проанализированный.
