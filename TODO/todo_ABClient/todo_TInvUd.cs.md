# План портирования TInvUd.cs

Файл `TInvUd.cs` содержит класс `ParsedDressed`, предназначенный для парсинга информации об одетых на персонажа вещах.

## Функциональность в C#

*   **Назначение**: Проанализировать HTML-код страницы инвентаря, чтобы определить, какие предметы надеты в слоты рук. Основное внимание уделяется удочкам и ножам для разделки.
*   **Парсинг (в конструкторе)**: Логика полностью завязана на парсинге аргументов JavaScript-функций `slots_inv(...)` или `slots_pla(...)`, найденных в HTML. Эти аргументы содержат всю информацию о надетых вещах в компактном виде с разделителями.
*   **Методы с побочными эффектами**: Методы `IsWear1()`, `IsWear2()`, `IsWearKnife()` не просто возвращают `bool`, а выполняют сложную логику. Они сравнивают надетые предметы с теми, что указаны в настройках профиля (`AppVars.Profile`), и, в случае совпадения, **модифицируют глобальное состояние**, записывая информацию о найденных предметах в `AppVars` (например, `AppVars.AutoFishHand1`). Это очень плохая практика, так как "get"-методы не должны изменять состояние.

## Проверка на существующую реализацию в Android

- **Результат:** Функциональность не реализована. В Android-проекте нет класса `ParsedDressed` или подобной логики.

## Решение для портирования на Android

Необходимо создать класс `ParsedDressed.java`. Логику парсинга нужно будет аккуратно перенести. Логику методов `IsWear...` следует подвергнуть рефакторингу, чтобы разделить проверку состояния и его изменение.

## План реализации

- [ ] **Создать файл `ParsedDressed.java`** в пакете `ru.neverlands.abclient.model` или `ru.neverlands.abclient.parsers`.

- [ ] **Портировать конструктор**:
    - [ ] Перенести логику поиска строк `slots_inv(` и `slots_pla(`.
    - [ ] Аккуратно перенести всю логику парсинга аргументов с помощью `String.split()`.
    - [ ] Поля класса (`Hand1`, `Hand2`, `slist`, `dlist` и т.д.) должны заполняться так же, как в C#.

- [ ] **Рефакторинг и портирование методов `IsWear...`**:
    - [ ] Вместо одного метода с побочными эффектами, следует создать два отдельных:
        1.  `public boolean isWearingCorrectRod1()`: Этот метод будет только проверять, надета ли правильная удочка, и возвращать `true` или `false`.
        2.  `public void updateAutoFishState()`: Этот метод будет вызываться после проверок и будет отвечать за обновление глобальных переменных в `AppVars`.
    - [ ] Аналогично поступить с `IsWear2` и `IsWearKnife`.
    - [ ] Список ножей из `IsWearKnife` следует вынести в константы.

- [ ] **Интеграция**:
    - [ ] В `PostFilter`-классе, который обрабатывает страницу инвентаря, нужно будет создавать экземпляр `new ParsedDressed(html)`.
    - [ ] Затем последовательно вызывать методы проверки и обновления состояния.

- [ ] **Обновить `todo_ABClient.md`**, отметив `TInvUd.cs` как проанализированный.
