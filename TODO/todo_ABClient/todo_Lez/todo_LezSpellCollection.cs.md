
### 1. План портирования LezSpellCollection.cs

Файл `LezSpellCollection.cs` — это статическая база данных, которая хранит всю информацию о заклинаниях и приемах, доступных в игре.

### 2. Функциональность в C#

- **Назначение:** Служить синглтон-источником данных о заклинаниях.
- **Хранение данных:**
    - `Spells`: Словарь `ID -> LezSpell` (где `LezSpell` содержит только имя).
    - `Od`, `PosType`, `PosMana`: Три больших, жестко закодированных массива, где по индексу (ID заклинания) хранятся стоимость ОД, числовой тип и стоимость маны. Это очень плохая практика, так как данные одного объекта размазаны по нескольким структурам.
    - `Hits`, `Blocks`, и т.д.: Жестко закодированные списки ID заклинаний для стандартных конфигураций.
- **Загрузка данных:** Имена заклинаний загружаются из строки в ресурсах приложения (`Resources.spells`).

### 3. Решение для портирования на Android

Этот класс является ярким примером данных, тесно связанных с кодом, и должен быть полностью заменен современной архитектурой "Репозиторий + внешний источник данных".

- **Консолидация данных:** Всю разрозненную информацию о каждом заклинании (имя, ОД, мана, тип) необходимо объединить в один объект `LezSpell`, как было описано в анализе `LezSpell.cs`.
- **Внешний источник:** Все эти данные должны быть извлечены из кода и помещены в единый `lez_spells.json` файл в `assets`.
- **Репозиторий:** Функциональность этого класса будет заменена на `LezSpellRepository`.

### 4. План реализации

1.  **Извлечь и сформировать `lez_spells.json`:**
    - Необходимо написать временный скрипт или вручную пройти по всем ID заклинаний (от 0 до ~450) и для каждого создать JSON-объект, объединяя данные из `Resources.spells`, массива `Od`, `PosType` и `PosMana`.
    - Пример записи в JSON:
      ```json
      {
        "id": 29,
        "name": "Магический барьер",
        "type": "MAGICAL_BLOCK", // Преобразовано из PosType[29]
        "odCost": 20,             // Взято из Od[29]
        "manaCost": 40            // Взято из PosMana[29]
      }
      ```
2.  **Создать `LezSpellRepository`:**
    - Этот синглтон (`object`) будет загружать `lez_spells.json` в `Map<Int, LezSpell>` при старте приложения.
    - Он будет предоставлять методы `getSpell(id: Int)` и `getAllSpells()`.
3.  **Удалить статические списки:**
    - Списки `Hits`, `Blocks` и т.д. являются просто конфигурацией по умолчанию. Эту логику следует перенести в конструктор по умолчанию для `data class LezBotsGroup`.
4.  **Заменить сериализацию:**
    - Методы `SpellsToString` и `SpellsFromString` не нужны. В Kotlin следует использовать встроенные функции `joinToString` и `split`.

- [ ] Написать скрипт/вручную извлечь все данные о заклинаниях в `lez_spells.json`.
- [ ] Реализовать `LezSpellRepository` для загрузки этого JSON.
- [ ] Перенести логику списков по умолчанию в `LezBotsGroup`.
- [x] Статические методы сериализации не портируются.
