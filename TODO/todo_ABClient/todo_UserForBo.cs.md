# План портирования UserForBo.cs

Файл `UserForBo.cs` определяет класс для хранения информации о противнике в контексте "Боевых Островов" (БО) и для расчета пути к нему.

## Функциональность в C#

*   **Назначение**: Обработать информацию о местоположении противника, чтобы рассчитать оптимальный маршрут для его перехвата. Класс инкапсулирует как исходные данные, так и результаты расчета.
*   **`FoePosition` enum**: Внутреннее перечисление для классификации точности определения местоположения противника (неизвестно, оффлайн, в городе, точное, ближайшее).
*   **Основная логика (`CalculatePath()`)**: 
    1.  Принимает на вход текстовое описание локации противника.
    2.  Определяет, находится ли противник в городе или в дикой местности.
    3.  Если в дикой местности, ищет по базе данных всех ячеек карты (`Map.Cells`) те, что соответствуют описанию.
    4.  Использует класс `MapPath` для построения кратчайшего маршрута от текущего положения игрока до одной или нескольких возможных ячеек противника.
    5.  Сохраняет результат: статус (`FoePosition`), количество шагов (`m_numSteps`) и целевую клетку для движения (`MoveToLocation`).
*   **Сортировка (`IComparable`)**: Реализует сложную логику сравнения, которая позволяет сортировать список противников, отдавая приоритет тем, до кого легче и быстрее добраться.

## Проверка на существующую реализацию в Android

- **Результат:** Функциональность не реализована. В Android-проекте нет ни этого класса, ни связанной с ним логики pathfinding'а.

## Решение для портирования на Android

Портирование этого класса потребует предварительного портирования его зависимостей, в первую очередь, классов `Map` и `MapPath` из папки `ExtMap`, которые содержат данные о карте и алгоритм поиска пути (вероятно, A* или Дейкстры).

## План реализации

- [ ] **Предварительный шаг: Портировать `ExtMap`**:
    - [ ] Необходимо сначала полностью портировать классы `Map.cs` (со всеми ячейками карты) и `MapPath.cs` (алгоритм поиска пути).

- [ ] **Создать файл `UserForBo.java`** в пакете `ru.neverlands.abclient.model`.
    - [ ] Создать внутренний `enum FoePosition`.
    - [ ] Перенести все поля класса.

- [ ] **Портировать метод `calculatePath()`**:
    - [ ] Перенести всю логику определения местоположения.
    - [ ] Запросы к `Map.Cells` и создание `new MapPath(...)` нужно будет адаптировать под портированные Java-версии этих классов.

- [ ] **Реализовать интерфейс `Comparable<UserForBo>`**:
    - [ ] Перенести логику сравнения из метода `compareTo`.

- [ ] **Переопределить метод `toString()`**:
    - [ ] Перенести логику форматирования строки для отображения статуса противника в UI.

- [ ] **Обновить `todo_ABClient.md`**, отметив `UserForBo.cs` как проанализированный.
