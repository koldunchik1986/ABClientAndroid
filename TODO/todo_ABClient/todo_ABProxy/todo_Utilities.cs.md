
### 1. План портирования Utilities.cs

Файл `Utilities.cs` содержит набор статических вспомогательных методов, используемых в разных частях прокси-логики.

### 2. Функциональность в C#

- **Назначение:** Предоставить общие утилиты для работы с сетью и данными.
- **Основные методы:**
    - **`IPEndPointFromHostPortString`, `IPFromString`, `CrackHostAndPort`**: Утилиты для парсинга строк, содержащих хост, порт и IP-адрес.
    - **`GzipExpand`, `DeflateExpand`**: Стандартные методы для распаковки данных, сжатых GZIP и Deflate.
    - **`DoUnchunk`, `IsChunkedBodyComplete`**: Низкоуровневые методы для обработки `Transfer-Encoding: chunked`. `IsChunkedBodyComplete` проверяет, все ли чанки получены, а `DoUnchunk` декодирует тело ответа, собирая его из чанков.

### 3. Решение для портирования на Android

Большая часть этого класса либо легко заменяется стандартными API, либо становится ненужной при использовании современных библиотек.

- **Парсинг хоста/порта:** Можно использовать `android.net.Uri` или `java.net.URI`.
- **Распаковка GZIP/Deflate:** В Java есть `java.util.zip.GZIPInputStream` и `java.util.zip.InflaterInputStream`.
- **Обработка `chunked`:** При использовании `OkHttp` (или любого другого современного HTTP-клиента), обработка `chunked` происходит **прозрачно и автоматически**. Библиотека сама читает и декодирует чанки, а вы получаете доступ к уже полному и собранному телу ответа. Это делает методы `DoUnchunk` и `IsChunkedBodyComplete` **полностью ненужными**.

### 4. План реализации

1.  **Не портировать класс:** Класс `Utilities` как таковой не портируется.
2.  **Использовать стандартные API и возможности библиотек:**
    - Для парсинга URL использовать `android.net.Uri`.
    - Для работы с GZIP/Deflate (если это вообще понадобится, т.к. HTTP-клиент обычно делает это сам) использовать `GZIPInputStream` / `InflaterInputStream`.
    - Полностью положиться на HTTP-клиент в вопросах обработки `chunked` encoding.

- [ ] Удалить `Utilities` из плана портирования.
- [ ] Использовать `android.net.Uri` для парсинга URL.
- [ ] Положиться на `OkHttp` для автоматической обработки сжатия и `chunked` encoding.
