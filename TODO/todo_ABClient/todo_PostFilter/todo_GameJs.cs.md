### 1. План портирования GameJs.cs

Файл `GameJs.cs` является фильтром для основного игрового скрипта `game.js`. Этот скрипт, по-видимому, управляет фреймсетом и некоторыми функциями чата.

### 2. Функциональность в C#

- **Назначение:** Модифицировать `game.js` для изменения размеров фреймов и добавления кастомной логики авто-обновления арены.
- **Логика:** Состоит из двух основных замен строк:
    1.  `html = html.Replace("*,300", "*,400");`
        - **Что делает:** Вероятно, изменяет атрибут `rows` или `cols` в теге `<frameset>`, увеличивая размер основного игрового фрейма за счет уменьшения другого (возможно, фрейма чата).
    2.  `html = html.Replace("var ChatClearSize = 12228;", ...);`
        - **Что делает:** Внедряет большой блок JavaScript-кода сразу после объявления переменной `ChatClearSize`.
        - **Внедряемый код:** Добавляет переменные `AutoArena`, `AutoArenaTimer` и функции `arenareload()`, `toprefresh()`. Эта система предназначена для отложенной перезагрузки верхнего фрейма (`main_top`), что, вероятно, используется для обновления данных об арене без полной перезагрузки страницы.
- **Закомментированный код:** В файле присутствует большой закомментированный блок, который должен был реализовывать более тесную интеграцию с настройками чата (размер, скорость, режим фильтрации) через `window.external`. Этот код неактивен и портироваться не будет, так как эта функциональность будет реализована нативно.

### 3. Решение для портирования на Android

Задача сводится к точному воспроизведению строковых замен, выполняемых в C#-версии. Внедряемый JavaScript-код не содержит специфичных для IE или `window.external` вызовов, поэтому его можно перенести без изменений.

- **Архитектура:** Логика останется внутри фильтра `GameJs.java`. Он будет получать байтовый массив, преобразовывать в строку, выполнять замены и возвращать измененный массив байт.

### 4. План реализации

1.  **Создать `GameJs.java`:**
    - [x] Создать класс `GameJs` в пакете `ru.neverlands.abclient.postfilter`.
2.  **Реализовать метод `process(byte[] array)`:**
    - [x] Преобразовать `array` в строку `html` с использованием кодировки `Russian.getString()`.
    - [x] Выполнить замену `html = html.replace("*,300", "*,400");`.
    - [x] Определить исходную строку для поиска: `String original = "var ChatClearSize = 12228;";`.
    - [x] Определить большой блок JS-кода для внедрения. **Важно:** Все кавычки и спецсимволы внутри этого блока должны быть корректно экранированы для Java-строки.
    - [x] Сформировать строку для замены: `String replacement = original + injectedJsBlock;`.
    - [x] Выполнить вторую замену: `html = html.replace(original, replacement);`.
    - [x] Преобразовать измененную строку `html` обратно в байтовый массив `Russian.getBytes(html)` и вернуть его.
3.  **Обновить `todo_PostFilter.md`:**
    - [x] Пометить `GameJs.cs` как `[x]` проанализированный.

- [x] Реализовать класс `GameJs.java` с методом `process`.
- [x] Аккуратно перенести и экранировать блок внедряемого JavaScript-кода.