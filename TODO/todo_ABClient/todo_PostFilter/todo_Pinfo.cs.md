# План портирования Pinfo.cs

Файл `Pinfo.cs` - это часть `partial` класса `Filter`, отвечающая за модификацию страницы информации о персонаже (`pinfo.cgi`).

## Функциональность в C#

*   **Назначение**: Перехватить и значительно переработать страницу `pinfo.cgi`.
*   **Закомментированная логика**: Весь код в методе закомментирован, но он показывает изначальный замысел:
    1.  **Парсинг данных**: Извлечь из JS-переменной `var params` подробную информацию о персонаже (статы, клан, ник и т.д.) и добавить ее в `ChatUserList`.
    2.  **Внедрение CSS**: Добавить на страницу большой блок CSS для полной пере-стилизации отображения инвентаря и характеристик.
    3.  **Кастомные тултипы**: Содержит сложный метод `MakeThingPopup` для генерации кастомных всплывающих подсказок для предметов, которые должны были показывать подробную информацию из `ThingsDb`.
*   **Текущее состояние**: Фильтр отключен и ничего не делает.

## Проверка на существующую реализацию в Android

- **Результат:** Функциональность не реализована.

## Решение для портирования на Android

Это очень большая и сложная задача, которая была заброшена даже в C#-версии. Портирование потребует огромных усилий.

1.  **Парсинг `var params`**: Эту логику можно реализовать, но она потребует создания множества классов-моделей для хранения всех извлеченных данных.
2.  **Внедрение CSS**: Можно внедрить CSS в `WebView` с помощью `loadDataWithBaseURL` или `evaluateJavascript`.
3.  **Кастомные тултипы**: Реализация всплывающих подсказок в `WebView` - очень сложная задача. Стандартных средств для этого нет. Потребуется создавать сложные JS-интерфейсы и, возможно, показывать нативные `View` поверх `WebView`, что сопряжено с проблемами позиционирования.

Учитывая, что функционал был отключен, его портирование имеет низкий приоритет.

## План реализации

- [ ] **Низкий приоритет.** На данный момент, портирование не требуется, так как функционал был отключен в оригинале.
- [ ] Если в будущем потребуется реализовать кастомные тултипы, нужно будет провести отдельное исследование наилучших способов реализации этого в Android `WebView`.
- [ ] **Обновить `todo_PostFilter.md`**, отметив `Pinfo.cs` как проанализированный.
