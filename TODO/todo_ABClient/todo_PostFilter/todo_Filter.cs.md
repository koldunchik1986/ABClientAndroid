# План портирования Filter.cs

Файл `Filter.cs` - это главный статический класс-маршрутизатор для всех пост-фильтров.

## Функциональность в C#

*   **Назначение**: Является единой точкой входа для обработки ответов сервера. Его метод `Process` принимает URL и содержимое ответа, а затем, на основе URL, делегирует обработку одному из множества специализированных методов-фильтров (`ArenaJs`, `ButPhp`, `FightJs` и т.д.).
*   **Реализация**: Содержит большой `if-else if` блок, который проверяет адрес на соответствие определенным шаблонам и вызывает соответствующий фильтр.
*   **Вспомогательные методы**: Включает утилиты для создания HTML-редиректов и удаления `DOCTYPE` из HTML.

## Проверка на существующую реализацию в Android

- **Результат:** Частично реализовано.
- **Объяснение**:
    1.  В проекте существует класс `app/src/main/java/ru/neverlands/abclient/postfilter/Filter.java`.
    2.  В нем есть основной метод `process` с аналогичной `if-else if` структурой.
    3.  Многие вызовы фильтров уже реализованы и вызываются из `process`.
    4.  Однако, значительная часть правил маршрутизации из C#-версии отсутствует (например, для `index.cgi`, `pinfo.cgi`, `trade.php`, `ch_room.php`).
    5.  Метод `PreProcess` является пустой заглушкой.

## Решение для портирования на Android

Необходимо дополнить существующий `Filter.java`, добавив в него недостающие правила маршрутизации и создав соответствующие классы-фильтры, которые еще не были портированы.

## План реализации

- [ ] **Открыть `Filter.java`**.

- [ ] **Добавить недостающие `if` блоки** в метод `process`:
    - [ ] Добавить проверку для `index.cgi` и вызов `IndexCgi.process()`.
    - [ ] Добавить проверку для `pinfo.cgi` и вызов `Pinfo.process()`.
    - [ ] Добавить проверку для `trade.php` и вызов `TradePhp.process()`.
    - [ ] Добавить проверку для `ch_room.php` и вызов `ChRoomPhp.process()`.
    - [ ] И так далее для всех остальных отсутствующих фильтров.

- [ ] **Создать недостающие классы-фильтры**:
    - [ ] Для каждого нового правила маршрутизации создать соответствующий Java-класс в пакете `ru.neverlands.abclient.postfilter` (например, `IndexCgi.java`, `Pinfo.java` и т.д.).
    - [ ] Провести детальный анализ и портирование логики для каждого из этих новых классов.

- [ ] **Раскомментировать существующие вызовы**:
    - [ ] После портирования `FightJs`, раскомментировать строку `return FightJs.process(array);`.

- [ ] **Обновить `todo_PostFilter.md`**, отметив `Filter.cs` как проанализированный.