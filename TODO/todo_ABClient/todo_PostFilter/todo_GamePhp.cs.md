### 1. План портирования GamePhp.cs

Файл `GamePhp.cs` является фильтром для страницы `game.php`. Эта страница является контейнером (фреймсетом) для всего игрового интерфейса и загружается сразу после успешного ввода логина и пароля.

### 2. Функциональность в C#

- **Назначение:** Автоматизировать ввод "флеш-пароля", который запрашивается после основного логина.
- **Логика:**
    1.  Фильтр активируется, если установлен флаг `AppVars.WaitFlash` (этот флаг устанавливается фильтром `IndexCgi` после отправки основной формы входа).
    2.  Он проверяет, задан ли у пользователя флеш-пароль в профиле (`AppVars.Profile.UserPasswordFlash`).
    3.  Если да, он парсит из HTML-кода страницы `plid` (ID игрока) из параметра `flashvars`.
    4.  **Генерация HTML:** Фильтр полностью отбрасывает полученный HTML и генерирует новую страницу. Эта страница содержит скрытую форму (`<form>`), которая автоматически отправляется с помощью JavaScript (`document.ff.submit()`).
    5.  **Отправка данных:** Форма отправляет методом POST флеш-пароль (`flcheck`) и ID игрока (`nid`) на тот же адрес `game.php`.
    6.  После этого флаг `AppVars.WaitFlash` сбрасывается.

### 3. Решение для портирования на Android

Как и в случае с `IndexCgi`, этот фильтр использует устаревшую технику авто-сабмита формы. Хотя в идеальной Android-архитектуре это следовало бы заменить на прямой HTTP POST-запрос из `ViewModel`, для точного следования логике ПК-версии и для завершения задачи портирования `Filter.java`, будет воспроизведена именно логика генерации и подмены HTML.

- **Архитектура:** Логика останется внутри `postfilter.GamePhp.java`.
- **Зависимости:** Логика зависит от глобальных флагов в `AppVars` и настроек в `AppVars.Profile`.

### 4. План реализации

1.  **Создать/Обновить `GamePhp.java`:**
    - [x] Создать класс, если он еще не существует.
2.  **Реализовать метод `process(byte[] array)`:**
    - [x] Преобразовать `array` в строку `html`.
    - [x] Проверить флаг `AppVars.WaitFlash` и наличие флеш-пароля в `AppVars.Profile`.
    - [x] Если условия не выполнены, сбросить `AppVars.WaitFlash = false` и вернуть исходный `array`.
    - [x] Если условия выполнены:
        - С помощью `HelperStrings.subString` извлечь `plid` из `flashvars`.
        - Если `plid` не найден, вернуть исходный `array`.
        - Создать `StringBuilder` и сгенерировать HTML-код со скрытой формой, полями `flcheck`, `nid` и скриптом для авто-отправки.
        - Преобразовать сгенерированный HTML в `byte[]` и вернуть его.
3.  **Обновить `todo_PostFilter.md`:**
    - [x] Пометить `GamePhp.cs` как `[x]` проанализированный.

- [x] Реализовать класс `GamePhp.java` с полной логикой парсинга `plid` и генерации HTML с формой.
- [x] Обеспечить корректную работу с флагами `AppVars.WaitFlash`.