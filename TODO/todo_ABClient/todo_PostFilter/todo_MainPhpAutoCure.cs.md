# План портирования MainPhpAutoCure.cs

Файл `MainPhpAutoCure.cs` - это часть `partial` класса `Filter`, отвечающая за логику автоматического лечения персонажа.

## Функциональность в C#

*   **Назначение**: Определить, есть ли у персонажа травмы или отравления, и если да, инициировать использование лечащих предметов.
*   **Ключевые методы**:
    *   `GetPoisonAndWounds(string html)`: Парсит страницу информации о персонаже, находит JavaScript-массив `cureff` (текущие эффекты) и подсчитывает количество травм и отравлений.
    *   `MainPhpRemovePoison(string html)`: Находит в инвентаре зелье лечения отравлений, извлекает его `wuid` и `vcode` из JS-функции `magicreform` и генерирует HTML-страницу со скрытой формой для автоматического использования этого зелья на себе.

## Проверка на существующую реализацию в Android

- **Результат:** Функциональность не реализована.

## Решение для портирования на Android

Необходимо создать новый класс `MainPhpAutoCure.java` и портировать в него оба метода. Логика парсинга и генерации HTML останется схожей.

## План реализации

- [ ] **Создать файл `MainPhpAutoCure.java`** в пакете `ru.neverlands.abclient.postfilter`.

- [ ] **Портировать метод `getPoisonAndWounds(String html)`**:
    - [ ] Создать статический метод.
    - [ ] Перенести логику поиска и парсинга JS-массива `cureff` с помощью `String.indexOf` и `String.split`.
    - [ ] Метод должен возвращать `int[4]` с подсчитанными эффектами.

- [ ] **Портировать метод `mainPhpRemovePoison(String html)`**:
    - [ ] Создать статический метод.
    - [ ] Перенести логику поиска зелья в инвентаре.
    - [ ] Перенести логику извлечения параметров из функции `magicreform`.
    - [ ] Перенести логику генерации HTML-страницы с формой для авто-использования.

- [ ] **Интегрировать в `MainPhp.java`**:
    - [ ] В методе `process` класса `MainPhp.java` нужно будет добавить вызовы этих новых методов в соответствующем месте (в блоке, где обрабатывается авто-лечение).

- [ ] **Обновить `todo_PostFilter.md`**, отметив `MainPhpAutoCure.cs` как проанализированный.
