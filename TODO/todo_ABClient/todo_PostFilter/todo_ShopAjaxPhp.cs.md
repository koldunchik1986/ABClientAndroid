# План портирования ShopAjaxPhp.cs

Файл `ShopAjaxPhp.cs` - это часть `partial` класса `Filter`, отвечающая за обработку AJAX-ответа от магазина.

## Функциональность в C#

*   **Назначение**: Проанализировать список предметов, возвращаемый сервером, сгруппировать одинаковые предметы в стопки и перестроить HTML для отображения сгруппированных предметов.
*   **Логика**:
    1.  Очищает глобальный список `AppVars.ShopList`.
    2.  Парсит HTML, находя и выделяя HTML-блок для каждого отдельного предмета.
    3.  Для каждого блока создает экземпляр класса `ShopEntry`, который выполняет детальный парсинг.
    4.  Ищет в полученном списке дубликаты предметов (с помощью `CompareTo`) и объединяет их в стопки, увеличивая счетчик у одного экземпляра и удаляя другой.
    5.  Полностью перестраивает HTML-часть со списком предметов, используя `ToString()` каждого (уже сгруппированного) объекта `ShopEntry`.

## Проверка на существующую реализацию в Android

- **Результат:** Функциональность полностью реализована.
- **Объяснение**:
    1.  В проекте существует класс `app/src/main/java/ru/neverlands/abclient/postfilter/ShopAjaxPhp.java`.
    2.  Его метод `process()` полностью повторяет логику C#-версии: парсинг, создание `ShopEntry`, группировка дубликатов и пересборка HTML.

## Решение для портирования на Android

Никаких действий не требуется.

## План реализации

- [x] **Задача решена.** Функциональность уже существует.
- [ ] **Обновить `todo_PostFilter.md`**, отметив `ShopAjaxPhp.cs` как проанализированный и реализованный (`[+]`).
