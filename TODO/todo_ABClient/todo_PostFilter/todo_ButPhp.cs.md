# План портирования ButPhp.cs

Файл `ButPhp.cs` - это часть `partial` класса `Filter`, отвечающая за модификацию фрейма с кнопками чата.

## Функциональность в C#

*   **Назначение**: Модифицировать на лету HTML-файл `but.php`.
*   **Логика**:
    1.  **Синхронизация времени**: Парсит из HTML время сервера и вычисляет разницу с локальным временем клиента, сохраняя ее в `AppVars.Profile.ServDiff`.
    2.  **Модификация кнопок**: Добавляет атрибут `name` к картинке `b1.gif`.
    3.  **Перехват смайлов**: Заменяет JS-вызовы `smile_open()` на вызовы `window.external.ShowSmiles()`, чтобы открыть нативное окно выбора смайлов.

## Проверка на существующую реализацию в Android

- **Результат:** Функциональность полностью реализована.
- **Объяснение**:
    1.  В проекте существует класс `app/src/main/java/ru/neverlands/abclient/postfilter/ButPhp.java`.
    2.  Метод `process()` в этом классе полностью повторяет логику C#-версии: он парсит время, вычисляет `ServDiff` с помощью `Calendar`, и выполняет все необходимые замены строк.

## Решение для портирования на Android

Никаких действий не требуется.

## План реализации

- [x] **Задача решена.** Функциональность уже существует.
- [ ] **Обновить `todo_PostFilter.md`**, отметив `ButPhp.cs` как проанализированный и реализованный (`[+]`).