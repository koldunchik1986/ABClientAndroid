
### 1. План портирования MainPhpDarkFog.cs

Файл `MainPhpDarkFog.cs` является частью логики автоматизации, предназначенной для использования способности "Сумеречный туман" на самого себя.

### 2. Функциональность в C#

- **Назначение:** Автоматически использовать способность "Сумеречный туман".
- **Логика:**
    1.  Ищет в HTML-коде страницы javascript-вызов `abil_2(3, 'vcode')`.
    2.  Извлекает из этого вызова `vcode` (код проверки).
    3.  Если `vcode` найден, генерирует новую HTML-страницу со скрытой формой.
    4.  В форму подставляются все необходимые для использования способности параметры (`useaction`, `addid`, `post_id`, `vcode`) и ник текущего пользователя (`AppVars.Profile.UserNick`) в качестве цели.
    5.  В конец страницы добавляется javascript-код (`document.ff.submit();`), который автоматически отправляет форму.
    6.  Возвращает сгенерированную HTML-страницу, которая немедленно использует способность.

### 3. Решение для портирования на Android

Эта логика зависит от `AppVars` и должна быть реализована на стороне Android-приложения, а не в виде javascript-фильтра.

### 4. План реализации

1.  **Создать класс `AbilityManager` в Android:**
    - Этот класс будет отвечать за использование различных способностей.
2.  **Реализовать обработку ответа от сервера:**
    - В `WebViewClient` перехватывать ответы, где может быть доступна эта способность.
    - Если `AbilityManager`'у дана команда использовать туман, он должен проанализировать HTML.
3.  **Реализовать логику анализа в `AbilityManager`:**
    - Воспроизвести логику парсинга `vcode` из вызова `abil_2`.
4.  **Выполнение действия:**
    - `AbilityManager` должен сформировать `POST`-запрос на `main.php` со всеми необходимыми параметрами.
    - Выполнить этот запрос с помощью `WebView.postUrl()` или другой сетевой библиотеки.

- [ ] Создать класс `AbilityManager`.
- [ ] Реализовать в `WebViewClient` перехват и передачу HTML-кода в `AbilityManager`.
- [ ] Реализовать в `AbilityManager` логику парсинга `vcode`.
- [ ] Реализовать формирование и выполнение `POST`-запроса для использования способности.
