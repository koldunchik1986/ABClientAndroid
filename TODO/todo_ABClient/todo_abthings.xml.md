
### 1. План портирования abthings.xml

Файл `abthings.xml` - это большая база данных в формате XML, содержащая информацию о тысячах игровых предметов.

### 2. Функциональность в C#

- **Назначение:** Служить централизованным хранилищем всех характеристик игровых предметов.
- **Структура:** Содержит набор тегов `<t>`, каждый из которых описывает один предмет. Атрибуты:
    - `i`: Имя файла изображения предмета.
    - `n`: Название предмета (в кодировке windows-1251).
    - `r`: Строка с требованиями к предмету, разделенная `|`.
    - `b`: Строка с бонусами от предмета, разделенная `|`.
- **Использование:** Файл загружается и парсится классом `ThingsDb.cs` для предоставления информации о предметах другим частям приложения (отображение подсказок, автобой, торг).

### 3. Решение для портирования на Android

Хранить и парсить большой XML-файл при каждом запуске - крайне неэффективно. Данные должны быть конвертированы и помещены в локальную базу данных.

- **База данных:** **Room Persistence Library** является стандартом для работы с базами данных в Android.
- **Миграция данных:** Необходим **одноразовый** процесс конвертации данных из XML в формат, готовый для импорта в Room.

### 4. План реализации

1.  **Создать скрипт-конвертер:**
    - Написать скрипт (например, на Python или C#) для парсинга `abthings.xml`.
    - **Важно:** Скрипт должен правильно обрабатывать кодировку **windows-1251**.
    - Скрипт должен парсить не только атрибуты тега `<t>`, но и сложные строки `r` (требования) и `b` (бонусы), раскладывая их на отдельные, типизированные поля (сила, ловкость, урон и т.д.).
2.  **Подготовить БД для Room:**
    - Результатом работы скрипта должен стать файл базы данных SQLite (`.db`), который можно будет поместить в `assets` Android-проекта.
    - Room умеет инициализировать свою базу данных из готового файла, что избавляет от необходимости парсить что-либо на самом устройстве при первом запуске.
3.  **Создать `Entity` и `DAO`:**
    - Создать data-класс `ThingEntity` со всеми полями, соответствующими характеристикам предмета.
    - Создать `ThingsDao` для доступа к данным (например, `fun findThingByImage(imageName: String)`).
4.  **Создать `ThingsDatabase` и `ThingsRepository`:**
    - Настроить `RoomDatabase`, указав ему использовать pre-packaged базу данных из `assets`.
    - Создать `ThingsRepository` для предоставления удобного API для доступа к данным о предметах.

- [ ] Написать скрипт для конвертации `abthings.xml` в pre-packaged базу данных SQLite для Room.
- [ ] Создать `ThingEntity`, `ThingsDao`, `ThingsDatabase` и `ThingsRepository`.
- [ ] Настроить Room для загрузки базы данных из `assets`.
