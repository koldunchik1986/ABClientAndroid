# План портирования FormProfiles.cs

Файл `FormProfiles.cs` отвечает за отображение списка существующих профилей, выбор одного из них, а также за создание и редактирование профилей.

## Функциональность в C#

*   **Назначение**: Предоставить пользователю интерфейс для управления профилями. Пользователь может выбрать существующий профиль из списка, создать новый или отредактировать выбранный.
*   **UI**: 
    *   `comboConfigs`: выпадающий список (`ComboBox`) для отображения всех доступных профилей.
    *   `labelLastLogOn`: метка (`Label`) для отображения даты и времени последнего входа в выбранный профиль.
    *   `linkCreateNewProfile`: ссылка (`LinkLabel`) для открытия формы создания нового профиля (`FormProfile`).
    *   `linkEdit`: ссылка (`LinkLabel`) для открытия формы редактирования выбранного профиля (`FormProfile`).
*   **Логика**: 
    *   При инициализации форма получает коллекцию `Config` и заполняет `comboConfigs`.
    *   При выборе профиля в `comboConfigs` обновляется `SelectedUserConfig` и `labelLastLogOn`.
    *   Клик по `linkCreateNewProfile` вызывает `Manager.CreateNewConfig()`, который, в свою очередь, открывает `FormProfile` для создания нового профиля.
    *   Клик по `linkEdit` вызывает `Manager.EditExistingConfig(SelectedUserConfig)`, который открывает `FormProfile` для редактирования выбранного профиля.
*   **Данные**: Форма оперирует коллекцией объектов `Config`, которые представляют собой профили пользователей.

## Решение для портирования на Android

Функциональность будет реализована в `LoginActivity` с использованием `Spinner` для выбора профиля и кнопок для добавления и редактирования.

## План реализации

1.  **Интеграция в `LoginActivity`**:
    *   В `activity_login.xml` заменить `EditText` для ввода имени пользователя на `Spinner` (или `AutoCompleteTextView` в стиле `ExposedDropdownMenu`).
    *   Добавить две кнопки: "Редактировать" и "Добавить".

2.  **Реализация логики в `LoginActivity.java`**:
    *   **Загрузка профилей**: При создании `Activity` загружать список профилей из `SharedPreferences` с помощью `UserConfig.loadProfiles(this)`.
    *   **Заполнение `Spinner`**: Создать `ArrayAdapter` для `UserConfig` и установить его для `Spinner`. Последний использованный профиль должен быть выбран по умолчанию.
    *   **Обработка выбора**: Установить `OnItemSelectedListener` для `Spinner`. При выборе профиля обновлять поле для ввода пароля.
    *   **Обработка кнопок**:
        *   "Добавить": по клику открывать `ProfileActivity` для создания нового профиля.
        *   "Редактировать": по клику открывать `ProfileActivity` для редактирования выбранного профиля, передавая данные профиля через `Intent`.
    *   **Обновление списка**: Использовать `ActivityResultLauncher` для получения результата от `ProfileActivity`. При успешном сохранении профиля (добавлении или редактировании) перезагружать список профилей и обновлять `Spinner`.

3.  **Создание `ProfileActivity`**:
    *   Создать новую `Activity` (`ProfileActivity`) и соответствующий layout (`activity_profile.xml`) для формы создания/редактирования профиля. Эта `Activity` будет аналогом `FormProfile.cs`.
