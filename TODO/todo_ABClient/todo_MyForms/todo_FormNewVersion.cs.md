
### 1. План портирования FormNewVersion.cs

Файл `FormNewVersion.cs` реализует диалоговое окно, которое информирует пользователя о выходе новой версии приложения.

### 2. Функциональность в C#

- **UI:** Окно, отображающее описание новой версии (`changelog`), ссылку для скачивания и выпадающий список, чтобы отложить проверку обновлений на определенный срок.
- **Логика:**
    - В конструктор передается текст с описанием изменений.
    - `linkLabel_LinkClicked`: При клике на ссылку, она открывается в браузере по умолчанию (`Process.Start`).
    - `buttonOk_Click`: При нажатии "OK", считывается выбранное значение из выпадающего списка (например, "через неделю"), вычисляется дата следующей проверки и сохраняется в профиль пользователя (`AppVars.Profile.NextCheckVersion`).

### 3. Решение для портирования на Android

Это стандартный диалог "Доступно обновление". Его следует реализовать с помощью `DialogFragment`.

- **Проверка обновлений:** Логика самой проверки наличия новой версии (которая находится не в этом файле) должна быть реализована с помощью `WorkManager`, который будет периодически выполнять фоновый запрос к серверу.
- **Отображение:** При обнаружении новой версии, `WorkManager` должен будет инициировать показ `NewVersionDialogFragment`.

### 4. План реализации

1.  **Создать XML-разметку:**
    - Создать `layout/dialog_new_version.xml`.
    - Разместить `TextView` для описания (changelog), `Button` "Скачать" и `Spinner` для выбора времени следующей проверки.
2.  **Создать класс `NewVersionDialogFragment`:**
    - Унаследовать от `DialogFragment`.
    - Передавать в него описание и URL для скачивания через `Bundle`.
3.  **Реализовать логику:**
    - **Кнопка "Скачать":** В `OnClickListener` создавать `Intent(Intent.ACTION_VIEW, Uri.parse(downloadUrl))` и запускать его.
    - **Кнопка "Напомнить позже"/"OK":** В `OnClickListener` считывать значение из `Spinner`, вычислять `timestamp` следующей проверки и сохранять его в `SharedPreferences`.
4.  **Реализовать `UpdateCheckWorker`:**
    - Создать `Worker`, который будет раз в день/неделю делать запрос к серверу за информацией о последней версии.
    - Если версия новее текущей, `Worker` должен будет сохранить информацию о ней и инициировать показ диалога при следующем запуске приложения.

- [ ] Создать XML-разметку `dialog_new_version.xml`.
- [ ] Создать класс `NewVersionDialogFragment`.
- [ ] Реализовать логику кнопок "Скачать" и "Напомнить позже".
- [ ] Создать `UpdateCheckWorker` для фоновой проверки обновлений.
