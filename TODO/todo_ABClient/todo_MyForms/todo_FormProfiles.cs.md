
### 1. План портирования FormProfiles.cs

Файл `FormProfiles.cs` реализует диалоговое окно для выбора одного из существующих профилей пользователя.

### 2. Функциональность в C#

- **UI:** Диалоговое окно с выпадающим списком (`ComboBox`) для выбора профиля, меткой для отображения даты последнего входа и ссылками "Создать" и "Редактировать".
- **Логика:**
    - В конструктор передается массив всех существующих `UserConfig`.
    - `ComboBox` заполняется этими профилями.
    - При выборе профиля в списке, обновляется метка с датой последнего входа.
    - Ссылка "Создать" запускает процесс создания нового профиля (вероятно, открывая `FormProfile` в режиме создания).
    - Ссылка "Редактировать" запускает редактирование выбранного профиля (открывая `FormProfile` в режиме редактирования).
    - При нажатии "OK", форма закрывается и возвращает `SelectedUserConfig`.

### 3. Решение для портирования на Android

Этот экран является "переключателем профилей". Его следует реализовать как `Activity` или `DialogFragment`.

### 4. План реализации

1.  **Создать `ProfileChooserActivity` и его XML-разметку:**
    - Разместить `Spinner` для списка профилей, `TextView` для даты последнего входа, и три `Button`: "Выбрать", "Создать", "Редактировать".
2.  **Создать `ProfileRepository`:**
    - Этот класс будет отвечать за получение списка всех доступных профилей (например, сканируя `SharedPreferences` по определенному шаблону имен).
3.  **Создать `ProfileChooserViewModel`:**
    - `ViewModel` будет запрашивать список профилей у `ProfileRepository` и предоставлять его для UI через `LiveData`.
4.  **Создать `ArrayAdapter` для `Spinner`:**
    - Написать кастомный адаптер, чтобы в `Spinner` отображалось имя пользователя (`UserNick`) из объекта `UserConfig`.
5.  **Реализовать логику:**
    - `Activity` подписывается на `LiveData` из `ViewModel` и обновляет `Spinner`.
    - При выборе элемента в `Spinner` (`OnItemSelectedListener`), обновляется `TextView` с датой.
    - Кнопка "Создать" запускает `ProfileSettingsActivity` для создания нового профиля.
    - Кнопка "Редактировать" запускает `ProfileSettingsActivity`, передавая ей данные выбранного профиля.
    - Кнопка "Выбрать" завершает `Activity` и возвращает `Intent` с идентификатором выбранного профиля.

- [ ] Создать `ProfileChooserActivity` и ее разметку.
- [ ] Создать `ProfileRepository` для управления списком профилей.
- [ ] Создать `ProfileChooserViewModel`.
- [ ] Реализовать кастомный `ArrayAdapter` для `Spinner`.
- [ ] Настроить запуск `ProfileSettingsActivity` для создания и редактирования.
