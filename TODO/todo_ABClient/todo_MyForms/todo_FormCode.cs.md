
### 1. План портирования FormCode.cs

Файл `FormCode.cs` реализует диалоговое окно для ввода кода с картинки (капчи).

### 2. Функциональность в C#

- **UI:** Диалоговое окно с `PictureBox` для отображения капчи, полем `TextBox` для ввода кода, и кнопками (Обновить, Ввод, Увеличить).
- **Логика:**
    - `ShowPic()`: Отображает картинку капчи, которая хранится в виде массива байт в `AppVars.CodePng`.
    - `textCode_TextChanged`: Проверяет, что в поле ввода находятся только цифры и их не больше 5. Кнопка "Ввод" активна только если введено корректное число.
    - `btnRefresh_Click`: Обновляет картинку (повторно вызывает `ShowPic`).
    - `btnMaximize_Click`: Закрывает диалог с результатом `DialogResult.Yes`. Назначение не совсем ясно, возможно, для открытия увеличенного изображения.

### 3. Решение для портирования на Android

Эту функциональность следует реализовать с помощью `DialogFragment`.

### 4. План реализации

1.  **Создать XML-разметку:**
    - Создать `layout/dialog_captcha.xml`.
    - В разметке разместить `ImageView` для картинки, `TextInputEditText` для ввода кода (с `inputType="number"`), и кнопки.
2.  **Создать класс `CaptchaDialogFragment`:**
    - Унаследовать от `DialogFragment`.
    - В `onCreateView` "надуть" разметку.
3.  **Реализовать логику:**
    - **Отображение картинки:** Получить массив байт с капчей (из аналога `AppVars`), декодировать его в `Bitmap` с помощью `BitmapFactory.decodeByteArray()` и установить в `ImageView`.
    - **Валидация ввода:** Добавить `TextWatcher` к `EditText` для проверки длины и формата введенного числа, включая/выключая кнопку "OK".
    - **Обработка кнопок:** Назначить слушатели для кнопок "Обновить" (должен инициировать повторную загрузку капчи) и "OK" (должен возвращать введенный код).
4.  **Возврат результата:**
    - Использовать `setFragmentResultListener` для передачи введенного кода обратно в вызывающий компонент.

- [ ] Создать XML-разметку `dialog_captcha.xml`.
- [ ] Создать класс `CaptchaDialogFragment`.
- [ ] Реализовать отображение капчи из массива байт.
- [ ] Реализовать валидацию ввода с помощью `TextWatcher`.
- [ ] Уточнить и реализовать назначение кнопки "Увеличить".
