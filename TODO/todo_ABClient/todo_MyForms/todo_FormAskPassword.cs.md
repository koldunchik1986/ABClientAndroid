
### 1. План портирования FormAskPassword.cs

Файл `FormAskPassword.cs` реализует диалоговое окно для ввода и проверки пароля.

### 2. Функциональность в C#

- **UI:** Диалоговое окно с полем для ввода пароля, галочкой "показать пароль" и кнопками OK/Отмена.
- **Логика:**
    - В конструктор передается хэш правильного пароля.
    - При каждом изменении текста в поле ввода пароля, введенный текст хэшируется с помощью `Helpers.Crypts.Password2Hash`.
    - Полученный хэш сравнивается с правильным.
    - Кнопка "OK" активна только в том случае, если хэши совпадают.
    - Галочка "показать пароль" переключает маскирование символов в поле ввода.

### 3. Решение для портирования на Android

Эту функциональность следует реализовать с помощью `DialogFragment`.

### 4. План реализации

1.  **Создать XML-разметку:**
    - Создать `layout/dialog_ask_password.xml`.
    - В разметке разместить `com.google.android.material.textfield.TextInputLayout` с `TextInputEditText` для ввода пароля, `CheckBox` для переключения видимости и две `Button` (OK, Отмена).
2.  **Создать класс `AskPasswordDialogFragment`:**
    - Унаследовать от `DialogFragment`.
    - В `onCreateDialog` или `onCreateView` "надуть" разметку.
3.  **Реализовать логику:**
    - **Переключить видимость:** Добавить слушатель к `CheckBox`, который будет изменять `inputType` у `TextInputEditText` между `TYPE_TEXT_VARIATION_PASSWORD` и `TYPE_TEXT_VARIATION_VISIBLE_PASSWORD`.
    - **Проверка пароля:** Добавить `TextWatcher` к `TextInputEditText`. В методе `onTextChanged`:
        - Вызывать портированную функцию `Crypts.password2Hash()`.
        - Сравнивать хэши.
        - Устанавливать `okButton.isEnabled` в `true` или `false`.
    - **Перенести хэширование:** Убедиться, что класс `Crypts` и метод `password2Hash` портированы и доступны.
4.  **Обработка результата:**
    - Передать в диалог `callback` или использовать `setFragmentResultListener` для возврата введенного пароля в вызывающий фрагмент/активити.

- [ ] Создать XML-разметку `dialog_ask_password.xml`.
- [ ] Создать класс `AskPasswordDialogFragment`.
- [ ] Реализовать логику проверки пароля с помощью `TextWatcher`.
- [ ] Реализовать переключение видимости пароля.
- [ ] Обеспечить наличие портированной функции хэширования.
