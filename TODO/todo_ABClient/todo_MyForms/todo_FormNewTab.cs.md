
### 1. План портирования FormNewTab.cs

Файл `FormNewTab.cs` реализует диалоговое окно для открытия новой вкладки с веб-адресом. Диалог обладает логикой авто-определения типа адреса.

### 2. Функциональность в C#

- **UI:** Диалоговое окно с текстовым полем для ввода адреса и группой `RadioButton` для выбора типа адреса (Инфо, Лог боя, Форум, URL).
- **Логика:**
    - **Вставка из буфера:** При открытии, форма пытается вставить текст из буфера обмена в поле ввода.
    - **Авто-определение (`textAddress_TextChanged`):** При изменении текста, код анализирует его и пытается угадать тип адреса, автоматически переключая `RadioButton`. Например, если текст - это число, выбирается "Лог боя"; если это валидный URL - "URL".
    - **Формирование адреса (`GetAddress`):** После нажатия "OK", метод формирует итоговый URL. Если в поле уже был полный URL, он используется как есть. В противном случае, к введенному тексту добавляется префикс в соответствии с выбранным `RadioButton` (например, `http://www.neverlands.ru/pinfo.cgi?`).

### 3. Решение для портирования на Android

Эту функциональность следует реализовать с помощью `DialogFragment`.

### 4. План реализации

1.  **Создать XML-разметку:**
    - Создать `layout/dialog_new_tab.xml`.
    - Разместить `EditText` для адреса, `RadioGroup` с `RadioButton` для типов, и кнопки.
2.  **Создать класс `NewTabDialogFragment`:**
    - Унаследовать от `DialogFragment`.
3.  **Реализовать логику:**
    - **Буфер обмена:** В `onViewCreated` получить доступ к `ClipboardManager` и вставить текст в `EditText`.
    - **Авто-определение:** Добавить `TextWatcher` к `EditText`. В `afterTextChanged` реализовать логику анализа строки и автоматического переключения `RadioButton` в `RadioGroup`.
    - **Формирование URL:** В `OnClickListener` кнопки "OK" реализовать логику, аналогичную `GetAddress()`, для создания финального URL.
4.  **Возврат результата:**
    - Использовать `setFragmentResultListener` для передачи итогового URL в вызывающий компонент, который будет отвечать за открытие новой вкладки.

- [ ] Создать XML-разметку `dialog_new_tab.xml`.
- [ ] Создать класс `NewTabDialogFragment`.
- [ ] Реализовать вставку из буфера обмена.
- [ ] Реализовать логику авто-определения типа адреса в `TextWatcher`.
- [ ] Реализовать логику формирования итогового URL при нажатии на "OK".
