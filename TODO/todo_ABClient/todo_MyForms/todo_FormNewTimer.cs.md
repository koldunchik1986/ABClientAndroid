
### 1. План портирования FormNewTimer.cs

Файл `FormNewTimer.cs` реализует диалоговое окно для создания нового таймера - отложенного или периодического действия.

### 2. Функциональность в C#

- **UI:** Окно, позволяющее пользователю задать имя таймера, время срабатывания и выбрать одно из нескольких действий:
    - **Выпить зелье:** Выбрать зелье из списка, указать количество и сделать действие повторяющимся.
    - **Идти в локацию:** Указать ID локации для авто-навигации.
    - **Надеть комплект:** Указать имя комплекта для надевания.
- **Логика:**
    - В зависимости от выбранного `RadioButton`, активируются или деактивируются соответствующие поля ввода.
    - При нажатии "OK", создается объект `AppTimer`, заполняется всеми данными (время, действие, параметры) и добавляется в `AppTimerManager`, который отвечает за выполнение запланированных задач.

### 3. Решение для портирования на Android

Эта форма является UI для сложной системы фонового выполнения задач. Простого портирования UI недостаточно; необходимо реализовать всю систему планирования.

- **UI:** Реализуется как `Activity` или `DialogFragment`.
- **Планирование задач:** Идеальным решением для такой задачи в Android является **`WorkManager`**. Он обеспечивает гарантированное выполнение отложенных и периодических задач, даже если приложение закрыто или устройство перезагружено.
- **Хранение таймеров:** Список созданных пользователем таймеров должен храниться в постоянном хранилище, например, в базе данных **Room**.

### 4. План реализации

1.  **Создать `TimerEntity` и `TimerDao`:**
    - Определить `@Entity` для хранения информации о таймере (время, тип действия, параметры) в базе данных Room.
2.  **Создать `TimerWorker`:**
    - Унаследовать класс от `androidx.work.Worker`.
    - В методе `doWork()` будет основная логика. Он будет получать из `inputData` тип действия и его параметры.
    - В зависимости от действия, `Worker` будет инициировать соответствующий процесс (например, запускать `AutoDrinkService` или `AutoNavigateService`).
3.  **Создать `NewTimerActivity` и его разметку:**
    - Создать UI для настройки таймера.
4.  **Реализовать логику в `NewTimerViewModel`:**
    - При нажатии "OK":
        - Создать объект `TimerEntity` и сохранить его в базу данных через `Repository`.
        - Создать `OneTimeWorkRequest` или `PeriodicWorkRequest`.
        - Установить начальную задержку (`setInitialDelay`).
        - Передать параметры действия через `setInputData`.
        - Поставить задачу в очередь: `WorkManager.getInstance(context).enqueue(workRequest)`.

- [ ] Спроектировать и создать `TimerEntity` для Room.
- [ ] Создать `TimerWorker`, который будет выполнять запланированные действия.
- [ ] Создать `NewTimerActivity` и ее `ViewModel`.
- [ ] Реализовать в `ViewModel` логику сохранения таймера в БД и постановки задачи в очередь `WorkManager`.
