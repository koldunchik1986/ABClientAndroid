
### 1. План портирования FormSostav.cs

Файл `FormSostav.cs` реализует диалоговое окно для редактирования "состава" - списка потенциальных противников для автобоя.

### 2. Функциональность в C#

- **UI:** Окно, содержащее `ListBox` со списком врагов (`Foe`) и элементы управления для добавления новых врагов (выбор расы, диапазона уровней) и их удаления.
- **Логика:**
    - В конструктор передается строка с уже существующим составом, которая парсится для заполнения списка.
    - Кнопка "Добавить группу" позволяет массово добавить в список врагов определенной расы и в заданном диапазоне уровней.
    - Кнопка "Добавить невидимку" добавляет специальный объект `Foe` для невидимых противников.
    - Кнопка "Удалить" убирает выделенных врагов из списка.
    - При закрытии окна, родительская форма может получить итоговый список врагов через свойство `Members`.

### 3. Решение для портирования на Android

Это типичный экран-редактор списка. Его следует реализовать как `Activity` или `DialogFragment`.

- **UI:** Вместо `ListBox` следует использовать `RecyclerView` - это стандартный и наиболее эффективный способ отображения списков в Android.
- **Данные:** Список объектов `Foe` будет храниться в `RecyclerView.Adapter`.

### 4. План реализации

1.  **Создать `Foe` data-класс:**
    - Портировать класс `Foe` в Kotlin data-класс.
2.  **Создать XML-разметку:**
    - Создать `layout/dialog_roster_editor.xml`.
    - Разместить `RecyclerView` для отображения списка.
    - Над или под списком разместить `Spinner`'ы и `EditText`'ы для выбора расы и уровней, а также кнопки "Добавить" и "Удалить".
3.  **Создать `RosterAdapter`:**
    - Унаследовать от `RecyclerView.Adapter`.
    - Адаптер будет хранить `MutableList<Foe>`.
    - Реализовать методы `addFoe(foe: Foe)`, `removeFoe(position: Int)` и т.д., которые будут модифицировать список и вызывать `notifyDataSetChanged()` (или более специфичные `notify...` методы).
    - Реализовать логику для выделения элементов в списке.
4.  **Создать `RosterEditorDialogFragment`:**
    - В `onViewCreated` создать и установить `RosterAdapter` для `RecyclerView`.
    - Назначить `OnClickListener`'ы для кнопок, которые будут вызывать соответствующие методы у адаптера.
    - При нажатии "OK" в диалоге, получить итоговый список из адаптера и вернуть его вызывающему компоненту.

- [ ] Портировать класс `Foe`.
- [ ] Создать XML-разметку `dialog_roster_editor.xml`.
- [ ] Создать `RosterAdapter` для `RecyclerView`.
- [ ] Создать `RosterEditorDialogFragment` и реализовать в нем логику по управлению адаптером.
