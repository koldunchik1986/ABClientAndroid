
### 1. План портирования FormAutoLogon.cs

Файл `FormAutoLogon.cs` реализует диалоговое окно с обратным отсчетом для автоматического входа в игру.

### 2. Функциональность в C#

- **UI:** Диалоговое окно, отображающее имя пользователя и кнопку, на которой идет обратный отсчет.
- **Логика:**
    - При создании формы запускается `System.Windows.Forms.Timer`.
    - Каждую секунду таймер уменьшает счетчик и обновляет текст на кнопке (например, "Автовход через 2 сек").
    - Когда счетчик достигает нуля, форма закрывается с результатом `DialogResult.OK`, что сигнализирует основному коду о необходимости выполнить вход.
    - Пользователь может нажать "Отмена", чтобы прервать процесс.

### 3. Решение для портирования на Android

Эта функциональность легко реализуется с помощью стандартного `AlertDialog` и системного класса `android.os.CountDownTimer`. Этот подход уже был подробно описан в качестве примера в файле `rules_MDcreate.md`.

### 4. План реализации

1.  **Создать утилитный метод** для показа диалога, который будет принимать `Context`, имя пользователя и `callback` для обработки результата.
    ```java
    interface AutoLogonCallback {
        void onLoginConfirmed();
        void onLoginCancelled();
    }

    public static void showAutoLogonDialog(Context context, String userName, AutoLogonCallback callback) { ... }
    ```

2.  **Реализация `showAutoLogonDialog`**:
    - Создать `AlertDialog.Builder` с заголовком "Автоматический вход" и сообщением, включающим `userName`.
    - Установить кнопки "Отмена" и "Войти".
    - Создать и показать диалог: `AlertDialog dialog = builder.create();`.

3.  **Настройка `CountDownTimer`**:
    - После `dialog.show()`, получить ссылку на кнопку подтверждения: `final Button positiveButton = dialog.getButton(AlertDialog.BUTTON_POSITIVE);`
    - Создать и запустить `CountDownTimer` на 3-5 секунд.
    - В методе `onTick` таймера обновлять текст `positiveButton`.
    - В методе `onFinish` таймера программно закрывать диалог и вызывать `callback.onLoginConfirmed()`.

4.  **Обработка отмены**:
    - В обработчиках нажатия кнопки "Отмена" и закрытия диалога (например, `setOnCancelListener`) необходимо останавливать таймер (`timer.cancel()`) и вызывать `callback.onLoginCancelled()`.

- [ ] Создать утилитный метод `showAutoLogonDialog`.
- [ ] Реализовать в нем создание `AlertDialog`.
- [ ] Реализовать логику `CountDownTimer` для обновления кнопки и авто-подтверждения.
- [ ] Реализовать корректную обработку отмены.
