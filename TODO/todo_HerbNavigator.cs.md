# План портирования HerbNavigator.cs

Файл `HerbNavigator.cs` и его дизайнер описывают сложную форму "Навигатор трав", предназначенную для поиска трав на карте мира и построения маршрута к ним.

## Функциональность в C#

Несмотря на то, что файл с логикой почти пуст, по UI-компонентам можно восстановить полный сценарий работы:

1.  **Выбор трав**: Пользователь в списке `checkedListSearch` отмечает галочками одну или несколько трав, которые он хочет найти.
2.  **Поиск**: При нажатии кнопки "Поиск трав", запускается процесс сканирования карты.
3.  **Отображение результатов**: Код, используя данные из `ExtMap`, находит все клетки, где растут выбранные травы. Для каждой найденной клетки вычисляется расстояние от текущего положения игрока. Результаты (например, "Арника, Лес Чудес, 15 шагов") отображаются в списке `listResult`.
4.  **Построение маршрута**: Пользователь выбирает один из результатов в `listResult`. Код строит детальный маршрут до этой клетки с помощью `MapPath` и отображает его в компоненте `browserReport`.
5.  **Запуск навигации**: Кнопка "В путь!" становится активной. При ее нажатии запускается режим автоматического перемещения (`AutoMoving`) к выбранной клетке.

## Зависимости

*   **`ExtMap`**: Модуль **полностью зависит** от `ExtMap` (`Map.Cells` для поиска травы и `MapPath` для построения маршрута). Без портированного `ExtMap` эта форма бесполезна.

## План портирования на Android

**Статус: БЛОКИРОВАНО.** Портировать только после полной реализации `ExtMap`.

1.  **UI (`HerbNavigatorActivity.java`)**:
    *   Создать новый экран. Из-за сложности, это, скорее всего, будет отдельная `Activity`, а не диалог.
    *   Разметку можно разделить на три части с помощью `LinearLayout` с весами или `ConstraintLayout`.
    *   **Левая панель**: `RecyclerView` со списком всех доступных для поиска трав и `CheckBox`.
    *   **Центральная панель**: `RecyclerView` для отображения результатов поиска.
    *   **Правая панель**: `WebView` или кастомный `View` для графического отображения маршрута.
    *   Внизу — кнопка `MaterialButton` "В путь!".

2.  **ViewModel (`HerbNavigatorViewModel.java`)**:
    *   Будет содержать `LiveData` для списка трав, списка результатов и выбранного маршрута.

3.  **Логика**:
    *   **Поиск**: При нажатии на кнопку "Поиск" запускается корутина, которая:
        1.  Получает список выбранных трав.
        2.  Итерирует по `Map.getCells()` из портированного `ExtMap`.
        3.  Для каждой клетки проверяет, растет ли там нужная трава.
        4.  Если да, создает `MapPath` до этой клетки, чтобы узнать количество шагов.
        5.  Добавляет результат в `LiveData`, который обновляет центральный `RecyclerView`.
    *   **Выбор результата**: При клике на элемент в списке результатов, `ViewModel` строит детальный маршрут и обновляет `LiveData` для его отображения.
    *   **Запуск навигации**: При нажатии "В путь!" `Activity` должна закрыться и передать в `MainActivity` (или куда-то еще) команду на запуск авто-перемещения с указанием координат цели.
