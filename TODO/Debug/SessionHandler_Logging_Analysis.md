# Анализ логирования в SessionHandler.java

## Обзор

Данный документ содержит список всех мест в файле `SessionHandler.java`, где происходит логирование в Logcat, с указанием типа лога (Debug, Warning, Error) и примерного содержания сообщения.

## Константа TAG

`private static final String TAG = "SessionHandler";`

## Логирование по функциям/методам

### `SessionHandler(Socket clientSocket)` (Конструктор)
*   **Тип:** `Log.d`
*   **Сообщение:** `"SessionHandler created"`
*   **Назначение:** Информирует о создании нового экземпляра `SessionHandler`.

### `run()`
*   **Тип:** `Log.d`
*   **Сообщение:** `"Processing URL: " + request.url`
*   **Назначение:** Отслеживает URL, который обрабатывается текущей сессией.

*   **Тип:** `Log.d` (в цикле по заголовкам сервера)
*   **Тег:** `"SERVER_HEADER"`
*   **Сообщение:** `header.getKey() + ": " + value`
*   **Назначение:** Логирует все заголовки HTTP-ответа, полученные от сервера.

*   **Тип:** `Log.d`
*   **Сообщение:** `"Attempting to inject JS for: " + request.url`
*   **Назначение:** Информирует о начале процесса внедрения JavaScript.

*   **Тип:** `Log.e`
*   **Сообщение:** `"Session failed"` (с трассировкой стека `e`)
*   **Назначение:** Логирует общие ошибки, возникающие в процессе выполнения сессии.

### `injectJsFix(byte[] body, String url)`
*   **Тип:** `Log.w`
*   **Сообщение:** `"InjectJsFix: body for " + url + " is empty!"`
*   **Назначение:** Предупреждение, если тело HTML пустое для инъекции JS.

*   **Тип:** `Log.d`
*   **Сообщение:** `"InjectJsFix: Original HTML for " + url + ":\n" + html`
*   **Назначение:** Логирует полный оригинальный HTML-код перед внедрением JS. **Очень объемный лог.**

*   **Тип:** `Log.d`
*   **Сообщение:** `"InjectJsFix: <head> tag found for " + url + ". Injected JS."`
*   **Назначение:** Информирует об успешном внедрении JS в тег `<head>`.

*   **Тип:** `Log.w`
*   **Сообщение:** `"InjectJsFix: <head> tag NOT found for " + url + ". Prepended JS."`
*   **Назначение:** Предупреждение, если тег `<head>` не найден, и JS добавлен в начало документа.

*   **Тип:** `Log.d`
*   **Сообщение:** `"InjectJsFix: Modified HTML for " + url + ":\n" + newHtml`
*   **Назначение:** Логирует полный модифицированный HTML-код после внедрения JS. **Очень объемный лог.**

*   **Тип:** `Log.e`
*   **Сообщение:** `"Failed to inject JS fix for " + url` (с трассировкой стека `e`)
*   **Назначение:** Логирует ошибки, возникающие при попытке внедрения JS.
