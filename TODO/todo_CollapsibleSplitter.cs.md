# План портирования CollapsibleSplitter.cs

Файл `CollapsibleSplitter.cs` реализует кастомный UI-компонент — разделитель панелей с возможностью сворачивания/разворачивания одной из них.

## Функциональность в C#

*   **Наследование**: Компонент наследуется от стандартного `System.Windows.Forms.Splitter`.
*   **Сворачивание**: Основная добавленная функция — по клику на специальную область на разделителе, он не перемещается, а полностью скрывает (`Visible = false`) привязанную к нему панель (`ControlToHide`). Повторный клик возвращает панель.
*   **Кастомная отрисовка**: Большая часть кода отвечает за ручную отрисовку внешнего вида разделителя, включая разные стили (под XP, с точками, линиями), подсветку при наведении мыши и стрелочки, указывающие направление сворачивания.

## Решение для портирования на Android

**Прямое портирование невозможно**, так как компонент полностью основан на UI-фреймворке Windows Forms и его системе отрисовки `System.Drawing`.

Однако, аналогичное поведение можно реализовать с помощью нативных инструментов Android.

## План реализации

Наиболее современным и гибким способом создания подобной анимации в Android является `MotionLayout`.

1.  **XML-разметка (`MotionLayout`)**:
    *   В качестве корневого элемента разметки экрана используется `androidx.constraintlayout.motion.widget.MotionLayout`.
    *   Внутри него размещаются две панели (например, `FrameLayout` или `NestedScrollView`) и `View`, которая будет служить в качестве разделителя (ручки).

2.  **Описание сцены (`MotionScene`)**:
    *   Создается отдельный XML-файл в `res/xml/` для описания `MotionScene`.
    *   Внутри сцены описываются два состояния (`ConstraintSet`):
        *   **`id="expanded"`**: Развернутое состояние. Обе панели видимы, разделитель находится между ними. Размеры панелей определяются через `Constraint`.
        *   **`id="collapsed"`**: Свернутое состояние. Одна из панелей имеет нулевую ширину/высоту (`android:layout_width="0dp"`) и становится невидимой. Вторая панель занимает все доступное пространство. Разделитель прижимается к краю экрана.
    *   Описывается переход (`Transition`) между этими двумя состояниями:
        ```xml
        <Transition
            app:constraintSetStart="@id/expanded"
            app:constraintSetEnd="@id/collapsed">
            <OnClick
                app:targetId="@id/splitter_handle" 
                app:clickAction="toggle" />
        </Transition>
        ```
        Этот блок означает, что при клике на разделитель (`splitter_handle`) будет происходить анимированный переход между развернутым и свернутым состояниями.

3.  **Преимущества `MotionLayout`**:
    *   **Плавная анимация**: `MotionLayout` сам интерполирует все изменения размеров и положений, создавая плавную анимацию сворачивания/разворачивания.
    *   **Декларативность**: Вся логика анимации описывается в XML, что отделяет ее от бизнес-логики в коде.
    *   **Гибкость**: Позволяет создавать очень сложные и красивые переходы.
