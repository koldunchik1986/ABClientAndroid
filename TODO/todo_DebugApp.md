# Комплексная отладка и разработка

## Список задач

- [x] **Проблема (Решено):** Ники в комнате не окрашиваются и дублируются.
  - **Статус:** Решено.
  - **Решение:** Отключен `RoomManager`, который был причиной дублирования. Исправлена логика в `ChListJs.java` для корректного окрашивания.
  - **Связанный лог:** `TODO/Debug/debug_log_20251005_130000.md`

- [x] **Задача (Реализовано):** Рефакторинг управления контактами.
  - **Описание:** Переделать UI и логику добавления/изменения контактов в стиле ПК-версии.
  - **Статус:** Реализовано.
  - **Решение:**
    1.  Убрана возможность выбора типа контакта при добавлении. Новые контакты по умолчанию "Нейтралы" (`classId=0`).
    2.  По долгому нажатию на контакт теперь появляется контекстное меню.
    3.  В меню доступны действия: "Обновить", "Удалить", и смена типа ("Друг", "Враг", "Нейтрал").
  - **Связанный лог:** `TODO/Debug/feature_contact_refactor_20251005_140000.md`

- [x] **Задача (Реализовано):** Реализация импорта клана в контакты.
  - **Описание:** Добавить возможность импортировать всех членов клана в список контактов.
  - **Статус:** Реализовано.
  - **Решение:**
    1.  При открытии `ContactsActivity` с сервера скачивается и кэшируется файл `clans.txt`.
    2.  В контекстное меню группы (долгое нажатие на заголовок) добавлен пункт "Добавить весь клан".
    3.  Реализована логика, которая в фоновом потоке парсит файл `clans.txt`, находит нужный клан и добавляет всех его участников в контакты.
  - **Связанный лог:** `TODO/Debug/feature_clan_import_20251005_150000.md`