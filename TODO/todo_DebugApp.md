# Отладка приложения

## Проблема

Приложение падает при запуске на Android 9. В логах видна ошибка `java.lang.NoClassDefFoundError: Failed resolution of: Landroid/webkit/PacProcessor;`.

## Проведенные действия

1.  **[2025-10-02]** Проанализирован `logcat`, который показал, что сбой происходит при инициализации `WebView`.
2.  **[2025-10-02]** Выдвинута гипотеза, что проблема связана с `androidx.webkit:webkit:1.9.0` и `ProxyController`.
3.  **[2025-10-02]** Закомментирован код, использующий `ProxyController.getInstance().setProxyOverride` в `WebViewProxyHelper.java`. Это не решило проблему.
4.  **[2025-10-02]** Удалена зависимость `androidx.webkit:webkit:1.9.0` из `build.gradle`. Это привело к ошибкам компиляции, что подтвердило использование библиотеки.
5.  **[2025-10-02]** Полностью закомментирован файл `WebViewProxyHelper.java`. Сборка прошла успешно, но ошибка `PacProcessor` осталась.
6.  **[2025-10-02]** Восстановлен `WebViewProxyHelper.java` и закомментированы тела методов `setWebViewProxy` и `clearWebViewProxy`. Ошибка `PacProcessor` исчезла.
7.  **[2025-10-02]** Реализован `DiskCacheManager` для кэширования на диске.
8.  **[2025-10-02]** Изменена логика `shouldInterceptRequest` для использования `DiskCacheManager`.
9.  **[2025-10-02]** Отключено использование `Proxy` в `HttpURLConnection`, что привело к появлению фреймов.
10. **[2025-10-02]** Изменена логика `getCacheKey` в `DiskCacheManager` для использования оригинальных имен файлов.
11. **[2025-10-02]** Изменена логика `put` и `get` в `DiskCacheManager` для создания иерархической структуры папок в кэше.
12. **[2025-10-02]** Изменена логика `getCacheKey` в `DiskCacheManager` для игнорирования параметра `vcode`.

## Текущий статус

-   Приложение не падает.
-   Фреймы отображаются.
-   Кэширование работает.
-   **Проблема:** Кнопки навигации в игровом интерфейсе не работают.

## Следующие шаги

-   Проверить, что после изменения `getCacheKey` кнопки навигации работают корректно.
-   Обновить сессионный лог.
