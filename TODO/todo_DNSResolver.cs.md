# План портирования DNSResolver.cs и DNSCacheEntry.cs

Файлы `DNSResolver.cs` и `DNSCacheEntry.cs` реализуют собственную систему кэширования для DNS-запросов.

## Функциональность в C#

*   **`DNSCacheEntry`**: Класс для хранения результата DNS-запроса и времени его выполнения.
*   **`DNSResolver`**: Статический класс, который является точкой входа для получения IP-адреса по имени хоста.

**Принцип работы:**

Когда кастомному прокси-серверу нужно было установить соединение с хостом (например, `www.neverlands.ru`), он не сразу делал DNS-запрос. Вместо этого он вызывал `DNSResolver.GetIPAddress(...)`.

1.  `DNSResolver` проверял свой внутренний кэш.
2.  Если находил "свежую" (не старше 60 секунд) запись для этого хоста, то немедленно возвращал IP-адрес из кэша.
3.  Если запись была устаревшей или отсутствовала, он делал системный вызов `Dns.GetHostEntry(...)`, получал IP-адрес, сохранял его в кэш и возвращал результат.

Цель этого механизма — сократить время на установку соединения за счет экономии на повторных DNS-запросах.

## Решение для портирования на Android

**Портировать эти классы не нужно.**

Современные сетевые библиотеки и операционные системы имеют встроенные и гораздо более эффективные механизмы DNS-кэширования.

*   **Системный кэш Android**: Сама ОС Android кэширует DNS-запросы.
*   **Кэш `OkHttp`**: Рекомендуемая для использования в Android библиотека `OkHttp` имеет свой собственный DNS-интерфейс и кэш "из коробки". Она автоматически кэширует IP-адреса для хостов, к которым обращается.

Реализация еще одного уровня кэширования поверх уже существующих системных механизмов будет избыточной и неэффективной.

## План реализации (вместо портирования)

Никаких специальных действий не требуется. При реализации сетевого взаимодействия в `shouldInterceptRequest` с помощью `OkHttp` (или даже стандартного `HttpURLConnection`), DNS-кэширование будет работать автоматически.

```java
// При создании клиента OkHttp он по умолчанию использует системный DNS
// и собственный внутренний кэш.
OkHttpClient client = new OkHttpClient();

// Когда вы создаете запрос...
Request request = new Request.Builder()
    .url("http://www.neverlands.ru")
    .build();

// ...и выполняете его, OkHttp сам позаботится о DNS-резолвинге и кэшировании.
Response response = client.newCall(request).execute();
```
