# План портирования FormProfiles.cs

Файл `FormProfiles.cs` реализует окно менеджера профилей, которое, скорее всего, является стартовым экраном приложения.

## Функциональность в C#

*   **Назначение**: Предоставить пользователю интерфейс для выбора, создания или редактирования профиля перед входом в игру.
*   **UI**: Форма содержит выпадающий список (`ComboBox`) со всеми доступными профилями, метку с датой последнего входа для выбранного профиля, а также ссылки "Создать" и "Редактировать".
*   **Логика**: 
    *   При запуске список заполняется существующими профилями.
    *   Пользователь выбирает профиль, под которым хочет войти.
    *   Нажатие на "Создать" или "Редактировать" открывает окно `FormProfile`.
    *   После выбора профиля и нажатия "ОК", форма закрывается, и вызывающий код получает выбранный `Config` для дальнейшей работы.

## План портирования на Android

Эта форма должна быть реализована как стартовая `Activity` в Android-приложении.

1.  **Создать `ProfileManager.java`**: Прежде всего, необходимо создать класс-синглтон, который будет отвечать за всю логику работы с профилями: загрузку из `SharedPreferences`, сохранение, удаление, получение списка.

2.  **UI (`activity_profiles.xml`)**:
    *   Создать XML-разметку для `ProfilesActivity`.
    *   Использовать `RecyclerView` для отображения списка профилей. Для каждого элемента списка создать свою разметку (`list_item_profile.xml`), которая будет содержать `TextView` для имени профиля, `TextView` для даты последнего входа, и, возможно, кнопки "Редактировать" и "Удалить".
    *   Добавить `FloatingActionButton` (FAB) или `MaterialButton` для создания нового профиля.

3.  **Логика (`ProfilesActivity.java` и `ProfilesViewModel.java`)**:
    *   Создать `ProfilesViewModel`, который будет взаимодействовать с `ProfileManager`.
    *   При создании `Activity`, `ViewModel` запрашивает у `ProfileManager` список всех профилей (`List<Config>`).
    *   Этот список передается в `RecyclerView.Adapter` для отображения.
    *   **Обработка кликов**:
        *   **Клик на элемент списка**: Запускает `MainActivity`, передавая ей в `Intent` уникальный идентификатор выбранного профиля.
        *   **Клик на кнопку "Создать"**: Запускает `SettingsActivity` (аналог `FormProfile`) для создания нового профиля.
        *   **Клик на кнопку "Редактировать" в элементе**: Запускает `SettingsActivity`, передавая ей ID редактируемого профиля.
        *   **Клик на кнопку "Удалить" в элементе**: Показывает `AlertDialog` для подтверждения, и в случае успеха вызывает `ProfileManager.delete(profileId)` и обновляет список.

4.  **Возврат результата**: После создания/редактирования профиля в `SettingsActivity`, она должна возвращать результат в `ProfilesActivity` с помощью `setResult(RESULT_OK)`, чтобы `ProfilesActivity` могла обновить список профилей.
