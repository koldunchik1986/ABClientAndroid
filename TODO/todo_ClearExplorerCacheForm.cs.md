# План портирования ClearExplorerCacheForm.cs

Файл `ClearExplorerCacheForm.cs` и связанные с ним `.designer.cs` и `.resx` описывают простое диалоговое окно, которое информирует пользователя о процессе очистки кэша браузера Internet Explorer и позволяет отменить эту операцию.

## Функциональность в C#

*   **Отображение статуса**: На форме есть текстовая метка (`labelText`), на которую внешний код может выводить сообщения о ходе очистки (например, "Удаление временных файлов...").
*   **Возможность отмены**: На форме есть кнопка "Отмена". При ее нажатии устанавливается флаг `IsAllowed = false`. Код, выполняющий очистку, должен периодически проверять этот флаг и прерывать операцию, если он стал `false`.

## Специфика портирования на Android

1.  **Механизм очистки**: В Android очистка кэша `WebView` выполняется стандартными методами API, такими как `WebView.clearCache(true)` и `CookieManager.getInstance().removeAllCookies(...)`. Это быстрые операции, которые обычно не требуют отображения отдельного модального окна с прогрессом.
2.  **UI-компоненты**: Вместо `Form` в Android для подобных диалогов используются `AlertDialog` или `DialogFragment`.
3.  **Асинхронность**: Длительные операции в Android должны выполняться в фоновом потоке, чтобы не блокировать UI. Для этого используются корутины, `AsyncTask` (устарел) или другие механизмы.

## План реализации

Поскольку операция очистки кэша в Android обычно мгновенная, создание сложного диалога с отменой избыточно. Можно упростить логику.

**Простой вариант (рекомендуемый):**

1.  В настройках приложения создать пункт "Очистить кэш".
2.  При нажатии на него, выполнить в фоновом потоке:
    ```java
    // Выполняется в фоновом потоке
    WebView.clearCache(true);
    CookieManager.getInstance().removeAllCookies(null);
    CookieManager.getInstance().flush();
    ```
3.  После завершения показать пользователю короткое всплывающее уведомление (`Toast`) с текстом "Кэш успешно очищен".

**Полный вариант (если нужно сохранить оригинальное поведение):**

1.  **Создать `CacheClearManager.java`**: Класс, который будет управлять процессом.
2.  **Создать UI**: Спроектировать `DialogFragment` с `TextView` для статуса и `Button` для отмены.
3.  **Реализовать логику**:
    *   При запуске очистки `CacheClearManager` показывает `DialogFragment`.
    *   Запускает корутину или `AsyncTask`.
    *   Внутри задачи выполняет очистку. Хотя сама очистка быстрая, можно искусственно добавить шаги (например, "Очистка кэша WebView...", "Удаление cookie...") и публиковать прогресс через `LiveData`, на который будет подписан `DialogFragment` для обновления текста.
    *   Нажатие кнопки "Отмена" в диалоге должно будет отменять корутину/задачу.
    *   По завершении задачи диалог закрывается.
