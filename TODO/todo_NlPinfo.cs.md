# План портирования NlPinfo.cs

Файл `NlPinfo.cs` содержит метод `NlPinfoJs`, который является фильтром для одного из JavaScript-файлов, отвечающих за отображение информации о персонаже.

## Функциональность в C#

Фильтр выполняет одну простую замену в JS-коде:

*   **Оригинал:** `...+alt+...`
*   **Модификация:** `...+window.external.InfoToolTip(arr[0],alt)+...`

**Назначение:**

Эта модификация позволяет хост-приложению (C#) перехватывать стандартную всплывающую подсказку (`alt`) для элемента. Метод `InfoToolTip` получает на вход ID или название элемента (`arr[0]`) и оригинальный текст подсказки. Это дает возможность C#-коду:

1.  Прочитать текст стандартной подсказки.
2.  Дополнить его какой-либо кастомной информацией (например, данными из внутренней базы вещей, заметками пользователя и т.д.).
3.  Вернуть новый, расширенный текст подсказки для отображения.

## План портирования в Android

Это простой фильтр, который имеет смысл портировать, чтобы сохранить возможность кастомизации всплывающих подсказок в будущем.

1.  **Создать `NlPinfoJs.java`**: В пакете `ru.neverlands.abclient.postfilter`.
2.  **Реализовать метод `process`**:
    *   Метод будет принимать `byte[] array`.
    *   Он должен будет выполнить замену строки, как в C#-версии, но с использованием `AndroidBridge`:
        `js = js.replace("+alt+", "+AndroidBridge.InfoToolTip(arr[0],alt)+");`
3.  **Реализовать метод в `WebAppInterface`**:
    *   В классе-мосте `WebAppInterface` нужно будет создать соответствующий метод:
        ```java
        @JavascriptInterface
        public String InfoToolTip(String itemId, String originalTooltip) {
            // TODO: Реализовать логику дополнения подсказки
            // Пока что можно просто возвращать оригинальную подсказку
            return originalTooltip;
        }
        ```
4.  **Интегрировать в `Filter.java`**:
    *   Найти в C#-коде `Filter.cs`, по какому URL вызывается `NlPinfoJs`, и добавить аналогичную проверку в `Filter.java` для вызова `NlPinfoJs.process(array)`.
