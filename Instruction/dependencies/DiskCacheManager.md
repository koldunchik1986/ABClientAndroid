# Инструкция: Менеджер дискового кэша (DiskCacheManager)

## 1. Назначение

`DiskCacheManager` — это статический класс, отвечающий за сохранение и загрузку сетевых ресурсов (файлов) на диск устройства. Основная цель — кэширование данных, полученных из сети, для их повторного использования без необходимости делать новый запрос. Это позволяет:

-   Значительно экономить трафик пользователя.
-   Ускорять загрузку `WebView`, так как ресурсы читаются с диска, а не из интернета.
-   Обеспечить частичную работоспособность в офлайн-режиме.

## 2. Инициализация

Перед использованием кэша его необходимо инициализировать. Это делается один раз при старте приложения в классе `ABClientApplication`.

**Метод:** `public static void init(Context context)`
-   **Действие:** Метод получает на вход контекст приложения и определяет путь к папке для кэша (`abcache`) во внешнем хранилище приложения. Если папка не существует, он ее создает.
-   **`cacheDir`**: Приватная статическая переменная типа `File`, которая хранит путь к папке с кэшем.

## 3. Сохранение данных в кэш

**Метод:** `public static void put(String url, byte[] data)`
-   **Назначение:** Сохраняет массив байт (`data`) на диск, ассоциируя его с конкретным `url`.
-   **Алгоритм:**
    1.  Из `url` извлекаются хост и путь (например, из `http://example.com/path/to/file.js` получится `example.com/path/to/file.js`).
    2.  Создается объект `File`, используя `cacheDir` как корневую папку, а `host + path` как относительный путь. Это автоматически воссоздает структуру папок сайта на диске.
    3.  Если родительские папки для файла не существуют, они создаются (`parent.mkdirs()`).
    4.  Массив байт `data` записывается в созданный файл.

## 4. Получение данных из кэша

**Метод:** `public static byte[] get(String url)`
-   **Назначение:** Пытается найти и вернуть из кэша данные, соответствующие указанному `url`.
-   **Алгоритм:**
    1.  По `url` генерируется путь к файлу точно так же, как в методе `put`.
    2.  Проверяется, существует ли такой файл на диске (`file.exists()`).
    3.  Если файл существует, он полностью читается в массив байт и возвращается.
    4.  Если файл не найден или происходит ошибка чтения, метод возвращает `null`.
