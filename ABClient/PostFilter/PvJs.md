# Анализ PvJs.cs

Файл `PvJs.cs` является частью `PostFilter` и выполняет минимальную модификацию JavaScript-файла `/js/pv.js`.

## Основные модификации

*   **Оригинал (JS):** `'%clan% '`
*   **Модификация (C#):** `'%clan%'`

**Назначение:**

Единственная задача этого фильтра — удалить лишний пробел после директивы `%clan%`. Вероятно, этот пробел вызывал ошибки при парсинге или обработке клановых сообщений в C#-версии клиента. Сохранение этой логики необходимо для обеспечения идентичного поведения в портированной версии.

## План портирования в Java

1.  **Создать `PvJs.java`** в пакете `ru.neverlands.abclient.postfilter`.
2.  **Реализовать метод `process`**:
    *   Метод будет принимать `byte[]`.
    *   Конвертировать их в строку, используя кодировку `windows-1251`.
    *   Выполнить замену `"'%clan% '"` на `"'%clan%'"`.
    *   Конвертировать измененную строку обратно в `byte[]`.
3.  **Интегрировать в `Filter.java`**:
    *   В `Filter.java` найти условие `address.endsWith("/js/pv.js")`.
    *   Вызывать из него `PvJs.process(array)`.
