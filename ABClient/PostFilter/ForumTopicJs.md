# Анализ ForumTopicJs.cs

Файл `ForumTopicJs.cs` является частью `PostFilter` и предназначен для модификации JavaScript-файла `/js/forum/forum_topic.js`, который отвечает за отображение тем на форуме.

## Функциональность

Основная задача этого фильтра — реализация опции "легкого форума" (`LightForum`) путем удаления аватарок пользователей со страниц.

1.  **Проверка настройки**: В самом начале метод проверяет значение флага `AppVars.Profile.LightForum`. Если этот флаг установлен в `false`, фильтр немедленно завершает работу и возвращает исходный JS-файл без изменений.

2.  **Удаление аватарок**: Если флаг `LightForum` равен `true`, фильтр выполняет две замены в коде JavaScript:
    *   Он находит и удаляет HTML-код, отвечающий за вставку аватара автора темы.
    *   Он находит и удаляет HTML-код, отвечающий за вставку аватаров других пользователей, отвечающих в теме.

**Назначение:**

Эта функциональность предназначена для ускорения загрузки страниц форума и экономии трафика за счет отказа от загрузки изображений-аватаров. Пользователь может включать и отключать эту опцию в настройках профиля.

## План портирования в Java

1.  **Создать `ForumTopicJs.java`** в пакете `ru.neverlands.abclient.postfilter`.
2.  **Реализовать метод `process`**:
    *   Метод будет принимать `byte[] array`.
    *   В начале метода будет проверка `if (!AppVars.Profile.isLightForum()) return array;`.
    *   Если проверка пройдена, конвертировать `byte[]` в строку (`windows-1251`).
    *   Выполнить две замены, удаляющие теги `<img>` с аватарками, аналогично C#-версии.
    *   Конвертировать измененную строку обратно в `byte[]`.
3.  **Интегрировать в `Filter.java`**:
    *   В `Filter.java` найти условие `address.contains("/js/forum/forum_topic.js")`.
    *   Вызывать из него `ForumTopicJs.process(array)`.
