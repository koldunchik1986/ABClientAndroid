# Задача: Исправление отображения списка игроков в комнате

- [x] **Проблема:** Список игроков не отображался в Android-приложении.
- [x] **Анализ:**
    - **Причина 1 (Сетевая ошибка):** `FileNotFoundException` при фоновом опросе данных комнаты (`ch.php?lo=1`). Это было вызвано преждевременным запуском опроса до успешной аутентификации в `WebView`.
    - **Причина 2 (Ошибка JavaScript):** Скрипт `ch_list.js`, отвечающий за генерацию HTML-списка, падал, так как не мог получить доступ к нативным функциям через `window.external`.
- [x] **Решение:**
    1.  **Исправлена сетевая ошибка:** Запуск фонового опроса `RoomManager.startTracing()` перенесен из `MainActivity.onCreate()` в `MainActivity.onPageFinished()`, чтобы он происходил только после успешной загрузки основной страницы.
    2.  **Исправлен мост JavaScript:**
        - В `WebAppInterface.java` добавлены недостающие методы (`GetClassIdOfContact` и заглушки для `Check...`), которые вызываются из JavaScript.
        - В `MainActivity.java` добавлена инъекция скрипта-прокладки (`window.external = window.AndroidBridge;`), обеспечивающего совместимость старого JS-кода с новым Android-интерфейсом.
- [ ] **Дальнейшие шаги:**
    - Необходимо реализовать полную логику для `ContactsManager` и методов `Check...` в `WebAppInterface`, чтобы включить функции определения друзей/врагов и контекстные кнопки действий. Подробности в `TODO/todo_DebugApp.md`.

**Статус:** Основная проблема решена. Список игроков теперь отображается.
